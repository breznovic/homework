{"ast":null,"code":"import _slicedToArray from\"/home/breznovic/React/homework/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import s2 from\"../../s1-main/App.module.css\";import s from\"./HW14.module.css\";import axios from\"axios\";import SuperDebouncedInput from\"./common/c8-SuperDebouncedInput/SuperDebouncedInput\";import{useSearchParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getTechs=function getTechs(find){return axios.get(\"https://samurai.it-incubator.io/api/3.0/homework/test2\",{params:{find:find}}).catch(function(e){var _e$response,_e$response$data;alert(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.errorText)||e.message);});};var HW14=function HW14(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),find=_useState2[0],setFind=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),techs=_useState6[0],setTechs=_useState6[1];var sendQuery=function sendQuery(value){setLoading(true);getTechs(value).then(function(res){// делает студент\nif(res){setTechs(res.data.techs);setLoading(false);}// сохранить пришедшие данные\n//\n});};var onChangeText=function onChangeText(value){setFind(value);// делает студент\n// добавить/заменить значение в квери урла\nsetSearchParams(value);//\n};useEffect(function(){var params=Object.fromEntries(searchParams);sendQuery(params.find||\"\");setFind(params.find||\"\");},[]);var mappedTechs=techs.map(function(t){return/*#__PURE__*/_jsx(\"div\",{id:\"hw14-tech-\"+t,className:s.tech,children:t},t);});return/*#__PURE__*/_jsxs(\"section\",{className:s2.section,id:\"hw14\",children:[/*#__PURE__*/_jsx(\"div\",{className:s2.container,children:/*#__PURE__*/_jsx(\"h2\",{className:s2.hwTitle,children:\"Homework #14\"})}),/*#__PURE__*/_jsx(\"div\",{className:s2.wrapper,children:/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(s2.hw,\" \").concat(s2.container),children:[/*#__PURE__*/_jsx(SuperDebouncedInput,{id:\"hw14-super-debounced-input\",value:find,onChangeText:onChangeText,onDebouncedChange:sendQuery}),/*#__PURE__*/_jsx(\"div\",{id:\"hw14-loading\",className:s.loading,children:isLoading?\"...ищем\":/*#__PURE__*/_jsx(\"br\",{})}),mappedTechs]})})]});};export default HW14;","map":{"version":3,"names":["React","useEffect","useState","s2","s","axios","SuperDebouncedInput","useSearchParams","getTechs","find","get","params","catch","e","alert","response","data","errorText","message","HW14","setFind","isLoading","setLoading","searchParams","setSearchParams","techs","setTechs","sendQuery","value","then","res","onChangeText","Object","fromEntries","mappedTechs","map","t","tech","section","container","hwTitle","wrapper","hw","loading"],"sources":["/home/breznovic/React/homework/src/s2-homeworks/hw14/HW14.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport s2 from \"../../s1-main/App.module.css\";\nimport s from \"./HW14.module.css\";\nimport axios from \"axios\";\nimport SuperDebouncedInput from \"./common/c8-SuperDebouncedInput/SuperDebouncedInput\";\nimport { useSearchParams } from \"react-router-dom\";\n\nconst getTechs = (find: string) => {\n  return axios\n    .get<{ techs: string[] }>(\n      \"https://samurai.it-incubator.io/api/3.0/homework/test2\",\n      { params: { find } }\n    )\n    .catch((e) => {\n      alert(e.response?.data?.errorText || e.message);\n    });\n};\n\nconst HW14 = () => {\n  const [find, setFind] = useState(\"\");\n  const [isLoading, setLoading] = useState(false);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [techs, setTechs] = useState<string[]>([]);\n\n  const sendQuery = (value: string) => {\n    setLoading(true);\n    getTechs(value).then((res) => {\n      // делает студент\n      if (res) {\n        setTechs(res.data.techs);\n        setLoading(false);\n      }\n      // сохранить пришедшие данные\n      //\n    });\n  };\n\n  const onChangeText = (value: string) => {\n    setFind(value);\n    // делает студент\n\n    // добавить/заменить значение в квери урла\n    setSearchParams(value);\n    //\n  };\n\n  useEffect(() => {\n    const params = Object.fromEntries(searchParams);\n    sendQuery(params.find || \"\");\n    setFind(params.find || \"\");\n  }, []);\n\n  const mappedTechs = techs.map((t) => (\n    <div key={t} id={\"hw14-tech-\" + t} className={s.tech}>\n      {t}\n    </div>\n  ));\n\n  return (\n    <section className={s2.section} id={\"hw14\"}>\n      <div className={s2.container}>\n        <h2 className={s2.hwTitle}>Homework #14</h2>\n      </div>\n\n      <div className={s2.wrapper}>\n        <div className={`${s2.hw} ${s2.container}`}>\n          <SuperDebouncedInput\n            id={\"hw14-super-debounced-input\"}\n            value={find}\n            onChangeText={onChangeText}\n            onDebouncedChange={sendQuery}\n          />\n\n          <div id={\"hw14-loading\"} className={s.loading}>\n            {isLoading ? \"...ищем\" : <br />}\n          </div>\n          {mappedTechs}\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default HW14;\n"],"mappings":"oHAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAOC,GAAE,KAAM,8BAA8B,CAC7C,MAAOC,EAAC,KAAM,mBAAmB,CACjC,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,oBAAmB,KAAM,qDAAqD,CACrF,OAASC,eAAe,KAAQ,kBAAkB,CAAC,wFAEnD,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,IAAY,CAAK,CACjC,MAAOJ,MAAK,CACTK,GAAG,CACF,wDAAwD,CACxD,CAAEC,MAAM,CAAE,CAAEF,IAAI,CAAJA,IAAK,CAAE,CAAC,CACrB,CACAG,KAAK,CAAC,SAACC,CAAC,CAAK,kCACZC,KAAK,CAAC,cAAAD,CAAC,CAACE,QAAQ,wDAAV,YAAYC,IAAI,2CAAhB,iBAAkBC,SAAS,GAAIJ,CAAC,CAACK,OAAO,CAAC,CACjD,CAAC,CAAC,CACN,CAAC,CAED,GAAMC,KAAI,CAAG,QAAPA,KAAI,EAAS,CACjB,cAAwBjB,QAAQ,CAAC,EAAE,CAAC,wCAA7BO,IAAI,eAAEW,OAAO,eACpB,eAAgClB,QAAQ,CAAC,KAAK,CAAC,yCAAxCmB,SAAS,eAAEC,UAAU,eAC5B,qBAAwCf,eAAe,EAAE,sDAAlDgB,YAAY,sBAAEC,eAAe,sBACpC,eAA0BtB,QAAQ,CAAW,EAAE,CAAC,yCAAzCuB,KAAK,eAAEC,QAAQ,eAEtB,GAAMC,UAAS,CAAG,QAAZA,UAAS,CAAIC,KAAa,CAAK,CACnCN,UAAU,CAAC,IAAI,CAAC,CAChBd,QAAQ,CAACoB,KAAK,CAAC,CAACC,IAAI,CAAC,SAACC,GAAG,CAAK,CAC5B;AACA,GAAIA,GAAG,CAAE,CACPJ,QAAQ,CAACI,GAAG,CAACd,IAAI,CAACS,KAAK,CAAC,CACxBH,UAAU,CAAC,KAAK,CAAC,CACnB,CACA;AACA;AACF,CAAC,CAAC,CACJ,CAAC,CAED,GAAMS,aAAY,CAAG,QAAfA,aAAY,CAAIH,KAAa,CAAK,CACtCR,OAAO,CAACQ,KAAK,CAAC,CACd;AAEA;AACAJ,eAAe,CAACI,KAAK,CAAC,CACtB;AACF,CAAC,CAED3B,SAAS,CAAC,UAAM,CACd,GAAMU,OAAM,CAAGqB,MAAM,CAACC,WAAW,CAACV,YAAY,CAAC,CAC/CI,SAAS,CAAChB,MAAM,CAACF,IAAI,EAAI,EAAE,CAAC,CAC5BW,OAAO,CAACT,MAAM,CAACF,IAAI,EAAI,EAAE,CAAC,CAC5B,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMyB,YAAW,CAAGT,KAAK,CAACU,GAAG,CAAC,SAACC,CAAC,qBAC9B,YAAa,EAAE,CAAE,YAAY,CAAGA,CAAE,CAAC,SAAS,CAAEhC,CAAC,CAACiC,IAAK,UAClDD,CAAC,EADMA,CAAC,CAEL,EACP,CAAC,CAEF,mBACE,iBAAS,SAAS,CAAEjC,EAAE,CAACmC,OAAQ,CAAC,EAAE,CAAE,MAAO,wBACzC,YAAK,SAAS,CAAEnC,EAAE,CAACoC,SAAU,uBAC3B,WAAI,SAAS,CAAEpC,EAAE,CAACqC,OAAQ,0BAAkB,EACxC,cAEN,YAAK,SAAS,CAAErC,EAAE,CAACsC,OAAQ,uBACzB,aAAK,SAAS,WAAKtC,EAAE,CAACuC,EAAE,aAAIvC,EAAE,CAACoC,SAAS,CAAG,wBACzC,KAAC,mBAAmB,EAClB,EAAE,CAAE,4BAA6B,CACjC,KAAK,CAAE9B,IAAK,CACZ,YAAY,CAAEsB,YAAa,CAC3B,iBAAiB,CAAEJ,SAAU,EAC7B,cAEF,YAAK,EAAE,CAAE,cAAe,CAAC,SAAS,CAAEvB,CAAC,CAACuC,OAAQ,UAC3CtB,SAAS,CAAG,SAAS,cAAG,aAAM,EAC3B,CACLa,WAAW,GACR,EACF,GACE,CAEd,CAAC,CAED,cAAef,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}