{"ast":null,"code":"import _slicedToArray from\"/home/breznovic/React/homework/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import s2 from'../../s1-main/App.module.css';import s from'./HW15.module.css';import axios from'axios';import SuperPagination from'./common/c9-SuperPagination/SuperPagination';import{useSearchParams}from'react-router-dom';import SuperSort from'./common/c10-SuperSort/SuperSort';/*\n* 1 - дописать SuperPagination +\n* 2 - дописать SuperSort\n* 3 - проверить pureChange тестами +\n* 3 - дописать sendQuery, onChangePagination, onChangeSort в HW15\n* 4 - сделать стили в соответствии с дизайном +\n* 5 - добавить HW15 в HW5/pages/JuniorPlus +\n* */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getTechs=function getTechs(params){console.log(params);return axios.get('https://samurai.it-incubator.io/api/3.0/homework/test3',{params:params}).catch(function(e){var _e$response,_e$response$data;alert(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.errorText)||e.message);});};var HW15=function HW15(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),sort=_useState2[0],setSort=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(4),_useState6=_slicedToArray(_useState5,2),count=_useState6[0],setCount=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),idLoading=_useState8[0],setLoading=_useState8[1];var _useState9=useState(100),_useState10=_slicedToArray(_useState9,2),totalCount=_useState10[0],setTotalCount=_useState10[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),techs=_useState12[0],setTechs=_useState12[1];var sendQuery=function sendQuery(params){setLoading(true);getTechs(params).then(function(res){// делает студент\n// сохранить пришедшие данные\nif(res&&res.data){setTechs(res.data.techs);setTotalCount(res.data.totalCount);setLoading(false);}//\n});};var onChangePagination=function onChangePagination(newPage,newCount){setPage(newPage);setCount(newCount);sendQuery({page:newPage,count:newCount});setSearchParams({page:page.toString(),count:count.toString()});};var onChangeSort=function onChangeSort(newSort){// делает студент\nsetSort(newSort);setPage(1);// при сортировке сбрасывать на 1 страницу\nsendQuery({page:1,count:count,sort:newSort});setSearchParams({page:page.toString(),count:count.toString()});//\n};useEffect(function(){var params=Object.fromEntries(searchParams);sendQuery({page:params.page,count:params.count});setPage(+params.page||1);setCount(+params.count||4);},[]);var mappedTechs=techs.map(function(t){return/*#__PURE__*/_jsxs(\"div\",{className:s.row,children:[/*#__PURE__*/_jsx(\"div\",{id:'hw15-tech-'+t.id,className:s.tech,children:t.tech}),/*#__PURE__*/_jsx(\"div\",{id:'hw15-developer-'+t.id,className:s.developer,children:t.developer})]},t.id);});return/*#__PURE__*/_jsxs(\"section\",{className:s2.section,id:'hw15',children:[/*#__PURE__*/_jsx(\"div\",{className:s2.container,children:/*#__PURE__*/_jsx(\"h2\",{className:s2.hwTitle,children:\"Homework #15\"})}),/*#__PURE__*/_jsx(\"div\",{className:s2.wrapper,children:/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(s2.hw,\" \").concat(s2.container),children:[idLoading&&/*#__PURE__*/_jsx(\"div\",{id:'hw15-loading',className:s.loading,children:\"Loading...\"}),/*#__PURE__*/_jsx(SuperPagination,{page:page,itemsCountForPage:count,totalCount:totalCount,onChange:onChangePagination}),/*#__PURE__*/_jsxs(\"div\",{className:s.rowHeader,children:[/*#__PURE__*/_jsxs(\"div\",{className:s.techHeader,children:[\"tech\",/*#__PURE__*/_jsx(SuperSort,{sort:sort,value:'tech',onChange:onChangeSort})]}),/*#__PURE__*/_jsxs(\"div\",{className:s.developerHeader,children:[\"developer\",/*#__PURE__*/_jsx(SuperSort,{sort:sort,value:'developer',onChange:onChangeSort})]})]}),mappedTechs]})})]});};export default HW15;","map":{"version":3,"names":["React","useEffect","useState","s2","s","axios","SuperPagination","useSearchParams","SuperSort","getTechs","params","console","log","get","catch","e","alert","response","data","errorText","message","HW15","sort","setSort","page","setPage","count","setCount","idLoading","setLoading","totalCount","setTotalCount","searchParams","setSearchParams","techs","setTechs","sendQuery","then","res","onChangePagination","newPage","newCount","toString","onChangeSort","newSort","Object","fromEntries","mappedTechs","map","t","row","id","tech","developer","section","container","hwTitle","wrapper","hw","loading","rowHeader","techHeader","developerHeader"],"sources":["/home/breznovic/React/homework/src/s2-homeworks/hw15/HW15.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport s2 from '../../s1-main/App.module.css'\nimport s from './HW15.module.css'\nimport axios from 'axios'\nimport SuperPagination from './common/c9-SuperPagination/SuperPagination'\nimport {useSearchParams} from 'react-router-dom'\nimport SuperSort from './common/c10-SuperSort/SuperSort'\n\n/*\n* 1 - дописать SuperPagination +\n* 2 - дописать SuperSort\n* 3 - проверить pureChange тестами +\n* 3 - дописать sendQuery, onChangePagination, onChangeSort в HW15\n* 4 - сделать стили в соответствии с дизайном +\n* 5 - добавить HW15 в HW5/pages/JuniorPlus +\n* */\n\ntype TechType = {\n    id: number\n    tech: string\n    developer: string\n}\n\nconst getTechs = (params: any) => {\n    console.log(params)\n    return axios\n        .get<{ techs: TechType[], totalCount: number }>(\n            'https://samurai.it-incubator.io/api/3.0/homework/test3',\n            {params}\n        )\n        .catch((e) => {\n            alert(e.response?.data?.errorText || e.message)\n        })\n}\n\nconst HW15 = () => {\n    const [sort, setSort] = useState('')\n    const [page, setPage] = useState(1)\n    const [count, setCount] = useState(4)\n    const [idLoading, setLoading] = useState(false)\n    const [totalCount, setTotalCount] = useState(100)\n    const [searchParams, setSearchParams] = useSearchParams()\n    const [techs, setTechs] = useState<TechType[]>([])\n\n    const sendQuery = (params: any) => {\n        setLoading(true)\n        getTechs(params)\n            .then((res) => {\n                // делает студент\n                // сохранить пришедшие данные\n                if (res && res.data) {\n                    setTechs(res.data.techs)\n                    setTotalCount(res.data.totalCount)\n                    setLoading(false)\n                }\n                //\n            })\n    }\n\n    const onChangePagination = (newPage: number, newCount: number) => {\n        setPage(newPage)\n        setCount(newCount)\n        sendQuery({page: newPage, count: newCount})\n        setSearchParams({page: page.toString(), count: count.toString()})\n    }\n\n    const onChangeSort = (newSort: string) => {\n        // делает студент\n        setSort(newSort)\n        setPage(1) // при сортировке сбрасывать на 1 страницу\n        sendQuery({page: 1, count, sort: newSort})\n        setSearchParams({page: page.toString(), count: count.toString()})\n        //\n    }\n\n    useEffect(() => {\n        const params = Object.fromEntries(searchParams)\n        sendQuery({page: params.page, count: params.count})\n        setPage(+params.page || 1)\n        setCount(+params.count || 4)\n    }, [])\n\n    const mappedTechs = techs.map(t => (\n        <div key={t.id} className={s.row}>\n            <div id={'hw15-tech-' + t.id} className={s.tech}>\n                {t.tech}\n            </div>\n\n            <div id={'hw15-developer-' + t.id} className={s.developer}>\n                {t.developer}\n            </div>\n        </div>\n    ))\n\n    return (\n        <section className={s2.section} id={'hw15'}>\n            <div className={s2.container}>\n                <h2 className={s2.hwTitle}>Homework #15</h2>\n            </div>\n\n            <div className={s2.wrapper}>\n                <div className={`${s2.hw} ${s2.container}`}>\n                    {idLoading && <div id={'hw15-loading'} className={s.loading}>Loading...</div>}\n\n                    <SuperPagination\n                        page={page}\n                        itemsCountForPage={count}\n                        totalCount={totalCount}\n                        onChange={onChangePagination}\n                    />\n\n                    <div className={s.rowHeader}>\n                        <div className={s.techHeader}>\n                            tech\n                            <SuperSort sort={sort} value={'tech'} onChange={onChangeSort}/>\n                        </div>\n\n                        <div className={s.developerHeader}>\n                            developer\n                            <SuperSort sort={sort} value={'developer'} onChange={onChangeSort}/>\n                        </div>\n                    </div>\n\n                    {mappedTechs}\n                </div>\n            </div>\n        </section>\n    )\n}\n\nexport default HW15"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}